generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}


enum Role {
  ADMIN
  AGENT
}

enum Status {
  ACTIVE
  INACTIVE
}

enum PropertyType {
  APARTMENT
  DUPLEX
  VILLA
}

enum ApartmentStatus {
  AVAILABLE   
  RESERVED
  SOLD
  CANCELLED
}

model User {
  id           Int      @id @default(autoincrement())
  name         String
  email        String   @unique
  phoneNumber  String
  status       Status   @default(ACTIVE)
  notes        String?
  role         Role     @default(AGENT)
  passwordHash  String

  clients      Client[] 
}

model Client {
  id           Int       @id @default(autoincrement())
  name         String
  email        String   @unique
  phoneNumber  String
  status       Status   @default(ACTIVE)
  notes        String?

  createdBy    User     @relation(fields: [createdById], references: [id])
  createdById  Int

  apartments   Apartment[]
}

model Project {
  id                  Int         @id @default(autoincrement())
  name                String
  numberOfApartments  Int
  notes               String?

  apartments          Apartment[]
}

model Apartment {
  id            Int              @id @default(autoincrement())
  number        Int
  floor         Int
  type          PropertyType     @default(APARTMENT)
  area          Float             
  threeDViewUrl String?          
  price         Float
  status        ApartmentStatus   @default(AVAILABLE)
  notes         String?

  project       Project           @relation(fields: [projectId], references: [id])
  projectId     Int

  client        Client?           @relation(fields: [clientId], references: [id])
  clientId      Int?
}